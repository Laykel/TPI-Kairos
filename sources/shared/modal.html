<div class="modal fade" id="confirm">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Suppression d'objet</h4>
      </div>
      <div class="modal-body">
        <p id="projectOrTask">Etes vous sûr(e) de vouloir supprimer le projet ou la tâche sélectionné(e)?</p>
        <p id="account">Etes vous sûr(e) de vouloir supprimer votre compte?</p>
        <p><span class="glyphicon glyphicon-warning-sign"></span> Cette action est définitive. <span class="glyphicon glyphicon-warning-sign"></span></p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-default" data-dismiss="modal">Annuler</button>
        <button class="btn btn-primary" data-dismiss="modal" id="yes">Supprimer</button>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
$( document ).ready(function(){

  $('#close').on('click', function(e){
    var projectId = $(this).closest("div").prop('id');

    var request = $.ajax({
      url: 'sources/shared/update.php',
      type: 'post',
      data: {"close": projectId}
    });

    request.done(function(){
      window.location.reload();
    });
  });

  $('#reopen').on('click', function(e){
    var projectId = $(this).closest("div").prop('id');

    var request = $.ajax({
      url: 'sources/shared/update.php',
      type: 'post',
      data: {"reopen": projectId}
    })

    request.done(function(){
      window.location.reload();
    });
  });

  $('#removeProject').on('click', function(e){
    var projectId = $(this).closest("div").prop('id');
    $("#account").hide();

    $('#confirm').modal({
        backdrop: 'static',
        keyboard: false
    })
      .one('click', '#yes', function(e){
        var request = $.ajax({
          url: 'sources/shared/update.php',
          type: 'post',
          data: {"removeProject": projectId}
        });

        request.done(function(){
          window.location.reload();
        });
      });
  });

  $('#removeTask').on('click', function(e){
    var projectId = $(this).closest("div").prop('id');
    $("#account").hide();

    $('#confirm').modal({
        backdrop: 'static',
        keyboard: false
    })
      .one('click', '#yes', function(e){
        var request = $.ajax({
          url: 'sources/shared/update.php',
          type: 'post',
          data: {"removeTask": projectId}
        });

        request.done(function(){
          window.location.reload();
        });
      });
  });

  $('#removeAccount').on('click', function(e){
    var accountId = $(this).closest("div").prop('id');
    $("#projectOrTask").hide();

    $('#confirm').modal({
        backdrop: 'static',
        keyboard: false
    })
      .one('click', '#yes', function(e){
        var request = $.ajax({
          url: 'sources/shared/update.php',
          type: 'post',
          data: {"removeAccount": accountId}
        });

        request.done(function(){
          window.location = "?page=logout";
        });
      });
  });
});
</script>